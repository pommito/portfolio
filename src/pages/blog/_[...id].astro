---
import { getCollection, render } from "astro:content";
import type { CollectionEntry } from "astro:content";

import Layout from "@/layouts/Layout.astro";
import Tag from "@/components/ui/Tag.astro";

type Props = {
  article: CollectionEntry<"blog">;
};

export async function getStaticPaths() {
  const articles = await getCollection("blog");

  return articles.map((article) => ({
    params: { id: article.id },
    props: { article },
  }));
}

const { article } = Astro.props;
const { Content } = await render(article);

const { title, date, tags } = article.data;

const formatedDate = new Date(date).toLocaleDateString("fr-FR", { year: 'numeric', month: 'long', day: 'numeric' });

---

<Layout
  title={`${title}・Victor Lebecq`}
  metaTitle={`${title}・Victor Lebecq`}
  metaDescription="TODO : Add a meta description to the articles"
>
  <h1 class="text-2xl">{title}</h1>
	<h4 class="text-neutral-500">Publié le {formatedDate}</h4>
  <ul class="space-x-2 mt-2">
    {tags.map((tag) => (
      <Tag label={tag} />
    ))}
  </ul>

  <div id="article-content" class="group mt-12 sm:mt-16">
    <Content  />
	</div>
</Layout>
